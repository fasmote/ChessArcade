<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test - Memory Matrix</title>
    <link rel="stylesheet" href="libs/chessground.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .board-container {
            width: 400px;
            height: 400px;
            margin: 20px auto;
            border: 2px solid #00ffff;
            background: #f0d9b5;
            position: relative;
        }

        /* Force visible chess board */
        .cg-wrap {
            width: 100% !important;
            height: 100% !important;
            background: #f0d9b5 !important;
        }

        .cg-board {
            width: 100% !important;
            height: 100% !important;
            background: #f0d9b5 !important;
        }

        .cg-square {
            border: 1px solid #999 !important;
            box-sizing: border-box !important;
        }

        .cg-square.light {
            background-color: #f0d9b5 !important;
        }

        .cg-square.dark {
            background-color: #b58863 !important;
        }
        .status {
            text-align: center;
            margin: 20px;
            font-size: 16px;
            padding: 10px;
            background: rgba(0,255,255,0.1);
            border-radius: 5px;
        }
        .btn {
            background: #00ffff;
            color: #000;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        .btn:hover {
            background: #00cccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† Simple Test - Memory Matrix Library</h1>

        <div class="status" id="status">Inicializando...</div>

        <div class="board-container" id="boardContainer">
            <!-- El tablero se crear√° aqu√≠ -->
        </div>

        <div style="text-align: center;">
            <button class="btn" onclick="initBoard()">Crear Tablero</button>
            <button class="btn" onclick="loadKingsPosition()">Cargar Reyes</button>
            <button class="btn" onclick="clearBoard()">Limpiar</button>
        </div>

        <div class="status">
            <strong>Debug Info:</strong>
            <div id="debugInfo"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="libs/chess.min.js"></script>
    <script src="libs/chessground.min.js"></script>

    <script>
        let chessInstance = null;
        let chessgroundInstance = null;
        let statusEl = document.getElementById('status');
        let debugEl = document.getElementById('debugInfo');

        function updateStatus(message) {
            statusEl.textContent = message;
            console.log(message);
        }

        function updateDebug(info) {
            debugEl.innerHTML = info;
        }

        function initBoard() {
            const container = document.getElementById('boardContainer');

            try {
                // Limpiar container
                container.innerHTML = '';

                // Crear instancia Chess.js
                chessInstance = new Chess();
                updateStatus('‚úÖ Chess.js creado');

                // Configuraci√≥n simple para Chessground
                const config = {
                    coordinates: true,
                    viewOnly: false,
                    orientation: 'white'
                };

                // Crear Chessground
                chessgroundInstance = Chessground(container, config);
                updateStatus('‚úÖ Tablero creado correctamente');

                updateDebug(`
                    Chess FEN: ${chessInstance.fen()}<br>
                    Casillas creadas: ${container.querySelectorAll('.cg-square').length}<br>
                    Container size: ${container.offsetWidth}x${container.offsetHeight}
                `);

            } catch (error) {
                updateStatus('‚ùå Error: ' + error.message);
                console.error('Error completo:', error);
            }
        }

        function loadKingsPosition() {
            if (!chessInstance || !chessgroundInstance) {
                updateStatus('‚ùå Primero crea el tablero');
                return;
            }

            try {
                const fen = "4k3/8/8/8/8/8/8/4K3 w - - 0 1";
                chessInstance.load(fen);
                chessgroundInstance.set({ fen: fen });
                updateStatus('‚úÖ Posici√≥n de reyes cargada');

                updateDebug(`
                    FEN cargado: ${fen}<br>
                    Piezas en tablero: ${chessgroundInstance.state.pieces.size}
                `);

            } catch (error) {
                updateStatus('‚ùå Error cargando posici√≥n: ' + error.message);
                console.error('Error:', error);
            }
        }

        function clearBoard() {
            if (chessgroundInstance) {
                chessgroundInstance.set({ fen: '8/8/8/8/8/8/8/8 w - - 0 1' });
                updateStatus('‚úÖ Tablero limpiado');
            }
        }

        // Auto-inicializaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('üîÑ DOM cargado, verificando librer√≠as...');

            setTimeout(() => {
                if (typeof Chess === 'undefined') {
                    updateStatus('‚ùå Chess.js no cargado');
                    return;
                }

                if (typeof Chessground === 'undefined') {
                    updateStatus('‚ùå Chessground no cargado');
                    return;
                }

                updateStatus('‚úÖ Librer√≠as cargadas - Haz clic en "Crear Tablero"');

                updateDebug(`
                    Chess.js: ${typeof Chess}<br>
                    Chessground: ${typeof Chessground}<br>
                    Container: ${document.getElementById('boardContainer') ? 'Encontrado' : 'No encontrado'}
                `);

            }, 1000);
        });
    </script>
</body>
</html>